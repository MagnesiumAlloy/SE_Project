<link rel="stylesheet" type="text/css" href="static/css/main.css" />
<html>
<head>
  <meta charset="UTF-8">
  <title>主界面</title>
  <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js">
  </script>

  <script src="static/js/myfile.js">
  </script>
   
   
<script>
  function my(){
       $.ajax({
           url: "/fileData",
           type:"get",
           dataType:"json",
           success:function (data) {
               console.log(data);
               myFunction(data.data);
           }
       })};

  function myFunction(arr) {
      var out = "";
      for(let i = 0; i < arr.length; i++) {
          out += "<tr  onclick="+"edit(this)"+">"
                   +"<td>"+arr[i].ID+"</td>"
                   +"<td>"+arr[i].Name+"</td>"
                   +"<td>"+arr[i].Name+"</td>"
                   +"<td>"+arr[i].Path+"</td>"
                   +"<td>"+arr[i].Type+"</td>"
                +"</tr>";
      }
      document.getElementById("content").innerHTML=out;
  }

  function myy(filepath){
       $.ajax({
           url: "/innerData",
           type:"get",
           dataType:"json",
           data: {
            filepath:filepath
           },
           success:function (res) {
               console.log(res);
               myFunction(res.data);
           }
       })};
    

    function edit(obj){
            let node=obj;
            let id=node.children[0].innerHTML;
            let filetype=node.children[4].innerHTML;
            let filepath=node.children[3].innerHTML;
            //alert(id,filepath,filetype);
            if(filetype == "t1"){ //文件夹类型,要你指定
              //更进一步
              myy(filepath);
            } else {
              let f=document.forms[0];
              f.action="/search?id="+id;
              f.submit();
            }
     }

</script>

</head>
<body>

  <ul class="nav1" class="out">
    <li class="border1">
      <a class="li1" href="/zhuye">用户主界面</a>
    </li>

    <li class="border1">
      <a href="#">基本功能</a>
      <ul class="nav2">
        <li>
          <a href="#">我的文件</a>
          <ul class="nav3">
            <li>
              <!--            根据当前用户的id，返回其仓库的文件-->
              <form id="user1">
                <input class="kuang" type="button"  name= "flag" value="文件浏览" onclick="user1()">
              </form>
            </li>
            <li>
              <form id="user2">
                <input class="kuang" type="button"  name= "flag" value="私密上传" onclick="user2()">
              </form>
            </li>
  
            <li>
              <form id="user3">
                <input class="kuang" type="button"  name= "flag" value="普通上传" onclick="user3()">
              </form>
            </li>
  
            <li>
              <form id="user4">
                <input class="kuang" type="button"  name= "flag" value="我的回收" onclick="user4()">
              </form>
            </li>
  

          </ul>
        </li>
        <li>
          <a href="#">我的空间</a>
          <ul class="nav3">
            <li>
              <form id="user5">
                <input class="kuang" type="button"  name= "flag" value="共享文件" onclick="user5()">
              </form>
            </li>
            <li>
              <form id="user6">
                <input class="kuang" type="button"  name= "flag" value="私密文件" onclick="user6()">
              </form>
            </li>
          </ul>
        </li>
      </ul>
    </li>

    <li class="border1">
      <a href="/Modify">修改密码</a>
    </li>

    <li class="border1">
      <a href="/about">关于我们</a>
    </li>

    <li class="border1">
      <a href="/">退出系统</a>
    </li>

  </ul>


  <div class="about">
    <h2 class="about_tit1">欢迎你，${user.get(0).getUsername()}</h2>
    <h3 class="about_tit">要不断的努力，才能成为更好的自己</h3>
    <img class="about_bgc" src="static/img/213.jpg" alt="">
  </div>

  <div ><input class="fileInput" id="fileUpload" type="file" name="button" style="display: none;" onchange="getFile(value)"></div>


</body>
</html>
